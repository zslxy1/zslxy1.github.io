import{j as e}from"./jsx-runtime.nr21BytU.js";import{r as a}from"./index.C0x19RBR.js";import{u as j}from"./useTheme.By6RZF_-.js";import{u as y}from"./useToast.C3r7vJXk.js";import{m as v}from"./proxy.e0h_wF6w.js";import"./index.CwGS6CU3.js";import"./index.DOz7KsIS.js";const N=[{id:1,title:"React 18新特性详解与实战",content:`# React 18新特性详解与实战

...`,date:"2023-11-01",category:"前端开发",tags:["React","JavaScript"],readTime:"8分钟",author:"开发者",imageUrl:"https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_16_9&prompt=React%2018%20features%2C%20code%20snippets%2C%20web%20development%2C%20modern%20UI&sign=fa2322e35b16a278f4b653146fb4ef55"}];function g(l){const r=/^(##?)\s+(.+)$/gm,n=[];let t;for(;(t=r.exec(l))!==null;){const m=t[1].length,i=t[2],d=i.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"");n.push({level:m,text:i,id:d})}return n}function T({id:l}){const{theme:r}=j(),{toast:n}=y(),[t,m]=a.useState(null),[i,d]=a.useState(!0),[u,x]=a.useState(""),[h,p]=a.useState(0);if(a.useEffect(()=>{d(!0);const s=setTimeout(()=>{const c=N.find(o=>o.id===parseInt(l));if(c){m(c);const o=g(c.content);o.length>0&&x(o[0].id)}else n.error("文章不存在或已被删除");d(!1)},300);return()=>clearTimeout(s)},[l,n]),a.useEffect(()=>{const s=()=>{const c=document.documentElement.scrollHeight-document.documentElement.clientHeight,b=window.scrollY/c*100;p(b)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]),i)return e.jsx("div",{className:`min-h-screen ${r==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-800"} transition-colors duration-300`,children:"加载中..."});if(!t)return e.jsx("div",{className:`min-h-screen ${r==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-800"} transition-colors duration-300`,children:"文章不存在"});const f=g(t.content);return e.jsxs("div",{className:`min-h-screen ${r==="dark"?"bg-gray-900 text-gray-100":"bg-gray-50 text-gray-800"} transition-colors duration-300`,children:[e.jsx(v.div,{className:"fixed top-0 left-0 h-1 bg-blue-500 z-50",style:{width:`${h}%`}}),e.jsx("section",{className:"py-12",children:e.jsxs("div",{className:"container mx-auto px-4 grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("article",{className:"lg:col-span-8",children:[e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-56 object-cover rounded-xl mb-6"}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:t.title}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("pre",{children:t.content})}),e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:"/articles",className:"inline-flex items-center px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-2"}),"返回文章列表"]})})]}),e.jsxs("aside",{className:`lg:col-span-4 ${r==="dark"?"bg-gray-800":"bg-white"} p-4 rounded-xl border ${r==="dark"?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"目录"}),e.jsx("ul",{className:"space-y-2",children:f.map(s=>e.jsx("li",{children:e.jsx("a",{href:`#${s.id}`,className:`text-sm ${u===s.id?"text-blue-500":""}`,children:s.text})},s.id))})]})]})})]})}export{T as default};
